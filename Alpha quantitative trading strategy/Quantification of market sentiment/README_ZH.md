# Alpha 量化交易策略：市场情绪量化

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python Version](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://www.python.org/downloads/)

[English](README_EN.md) | **中文**

本项目为A股市场提供了一个市场情绪打分的量化系统。它利用历史和实时的股票数据，基于涨跌停比率、连板股表现等关键指标计算出一个情绪指数（0-100分）。该系统帮助交易者和投资者衡量市场情绪，动态调整仓位，并有效管理风险。

核心逻辑源于Alpha量化策略，强调对市场心理的数据驱动洞察。该工具对于A股等波动性市场的短线交易、仓位管理和风险预警尤为有用。

## 目录

- [概述](#概述)
- [策略逻辑与来源](#策略逻辑与来源)
- [关键情绪指标](#关键情绪指标)
- [分析维度](#分析维度)
- [数据需求与获取](#数据需求与获取)
- [计算流程](#计算流程)
- [适用场景与实战应用](#适用场景与实战应用)
- [常见错误与优化建议](#常见错误与优化建议)
- [安装](#安装)
- [使用方法](#使用方法)
- [项目结构](#项目结构)
- [输出示例](#输出示例)
- [贡献](#贡献)
- [许可证](#许可证)

## 概述

市场情绪是指市场参与者对未来趋势的集体心理预期和风险偏好。情绪高涨期，投资者风险偏好上升，追逐收益；情绪低迷期，则趋于谨慎。传统上情绪是主观的，但现在可以利用AI、大数据和Tushare等API进行量化。

本项目实现了一个专注于**市场情绪量化**的**Alpha量化交易策略**。它生成每日情绪得分（0-100），识别情绪周期（例如，冰点期、复苏期、高潮期、退潮期），并提供背离预警（例如，情绪高涨但指数下跌）。输出包括详细的AI驱动分析和综合报告，有助于仓位管理和风险控制。

主要优势：
- **量化情绪**：将定性的市场情绪转化为可操作的分数。
- **风险管理**：预警过度乐观或悲观的情况。
- **策略整合**：作为量化选股、择时和对冲的输入因子。

## 策略逻辑与来源

### 1. 市场情绪的本质与量化意义
- **本质**：情绪驱动非理性行为，如泡沫或恐慌。
- **量化价值**：通过对指标建模，创建0-100的分数，用于动态仓位调整和风险警报。
- **来源**：灵感来源于A股交易模式，结合Tushare数据和AI分析（例如，通过OpenAI生成解读报告）。

### 2. 核心情绪指数
- **分数计算**：对指标进行归一化和加权，形成综合分数。
- **周期阶段**：基于历史分位数划分：
  - 冰点期（低）：分数 < 30 – 超卖，可能见底。
  - 复苏期：分数 30-50 – 市场回暖，存在入场机会。
  - 高潮期（高）：分数 50-80 – 市场过热，应减仓。
  - 退潮期：分数 >80 – 情绪消退，发出离场信号。
- **背离预警**：例如，情绪高涨但指数下跌，预示潜在反转。

## 关键情绪指标

- **涨跌停比率**：衡量多头/空头力量（高比率表示乐观）。
- **连板股平均收益率**：反映投机热度。
- **炸板率**：高炸板率表明追涨意愿减弱。
- **高标股溢价**：龙头股次日开盘溢价。
- **昨日涨停溢价**：昨日涨停股今日收益，显示连续性。

## 分析维度

系统利用AI（例如GPT-4o）从多个专业维度分析市场情绪，提供深度解读：

1.  **多空力量对比**：通过涨跌停比率 – 评估多空力量、资金流向和风险收益比。
2.  **投机情绪热度**：通过连板股表现 – 评估赚钱效应、龙头股表现和风险积累。
3.  **资金分歧与质量**：通过炸板率 – 分析涨停质量、获利了结压力和次日预期。
4.  **龙头股溢价**：通过高标股收益率 – 考察风险偏好、资金聚焦和情绪传导。
5.  **涨停连续性**：通过昨日涨停收益率 – 研究资金记忆、接力意愿和策略风险。
6.  **新闻情绪**：总结市场新闻，反映整体情绪、热点、风险、政策和资金信号。
7.  **综合报告**：整合所有维度，提供摘要、概述、多空分析、投机洞察、资金行为、风险预警、策略建议和展望。

历史归一化（例如60天窗口期）通过分位数确保分数具有上下文背景。

## 数据需求与获取

- **所需数据**：
  - 每日股票行情（涨跌幅、开盘价/收盘价、涨跌停状态）。
  - 涨跌停名单、连板股、炸板股。
  - 指数数据（例如上证指数）。
- **获取方式**：使用Tushare Pro API（需要Token）。提供API失败时的备用方案。不进行外部新闻爬取；根据数据模拟新闻摘要。

## 计算流程

1.  获取数据（每日行情、涨跌停、指数）。
2.  计算基础指标（比率、平均值、率）。
3.  通过历史窗口期进行归一化。
4.  AI分析：各维度分析 + 综合报告。
5.  输出：分数、周期阶段、预警、报告。

## 适用场景与实战应用

- **仓位管理**：情绪高涨 → 减仓；情绪低迷 → 加仓。
- **风险预警**：情绪与指数背离预示系统性风险。
- **策略辅助**：作为选股/择时的输入因子。
- **适用市场**：主要适用于A股；经过调整可适配港股/美股。


## 安装

1.  克隆仓库：
    ```bash
    git clone https://github.com/yourusername/alpha-quant-strategy.git
    cd alpha-quant-strategy
    ```
2.  安装依赖：
    ```bash
    pip install -r requirements.txt  # 假设你的requirements.txt包含：tushare, pandas, numpy, openai, requests, beautifulsoup4
    ```
3.  设置环境变量或编辑代码：`TUSHARE_TOKEN`, `OPENAI_API_KEY`, `OPENAI_API_BASE`。

## 使用方法

运行脚本：
```bash
python "Quantification of market sentiment.py"
```
- 默认日期：'20250923'（可在代码中修改）。
- 输出：控制台日志，Markdown报告（`market_sentiment_report.md`）。

如需自定义日期：编辑`__main__`部分的`calc_sentiment_score('YYYYMMDD')`。

## 项目结构

项目文件夹 `Alpha quantitative trading strategy` 包含：

- **[Quantification of market sentiment.py](Quantification%20of%20market%20sentiment.py)**：情绪计算和AI分析的主要Python源代码。
- **[README.md](README.md)**：本文档文件（英文版）。
- **[README_ZH.md](README_ZH.md)**：本文档的中文翻译版。
- **[market_sentiment_report.md](market_sentiment_report.md)**：代码执行生成的报告（例如，针对日期20250923）。
- **[output result on the console.md](output%20result%20on%20the%20console.md)**：示例运行的控制台输出记录。

## 输出示例

- **生成的报告**：查看 [market_sentiment_report.md](market_sentiment_report.md) 获取示例综合情绪报告。
- **控制台输出**：详细日志和AI响应记录在 [output result on the console.md](output%20result%20on%20the%20console.md)。

## 贡献

欢迎提交 Pull Request！如有重大更改，请先开启 Issue 讨论。请确保代码遵循 PEP8 规范并包含测试。

## 许可证

本项目采用 MIT 许可证 - 详情请见 [LICENSE](LICENSE) 文件（如有需要请添加）。
